<!DOCTYPE html>
<html>
<head>
  <title>Questionnaire</title>
  <link rel="stylesheet" href="styles.css">
</head>
<style>
    @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;700&display=swap');

body {
  font-family: 'Poppins', sans-serif;
  background: #b9b3a9;
  display: flex;
  justify-content: center;
}

.container {
  width: 450px;
  padding: 20px;
  margin-top: 80px;
  background-color: #f7f3f2;
  border-color: black;
  box-shadow: 0 5px 5px rgba(0, 0, 0, 0.1);
  border-radius: 20px;
}

h1 {
  text-align: center;
}

.questions-container {
  margin-bottom: 20px;
}

.question {
  font-weight: bold;
  margin-bottom: 10px;
}

.options {
  margin-bottom: 20px;
}

.option {
  display: block;
  margin-bottom: 10px;
}

.button {
  display: inline-block;
  padding: 10px 20px;
  background-color: #428bca;
  color: #fff;
  border: none;
  cursor: pointer;
  font-size: 16px;
  border-radius: 4px;
  transition: background-color 0.3s;
  margin-right: 10px;
}

.button:hover {
  background-color: #3071a9;
}

.result {
  text-align: center;
  margin-top: 20px;
  font-weight: bold;
}

.hide{
  display: none;
}

li{
    list-style: none;
}

ul {
    text-align: right;
    padding-left: 250px;
    
}

ul a {
    text-decoration: none;
    color: black;
}
</style>
<body>
  <div class="container">
    <h1>Screening test</h1>
    <h3 id="title2">Over the past 2 weeks have you been bothered by these problems?</h3>
    <h4 id="title3">Options indicate following levels: <br> 0: Not at all <br> 1: Several Days <br> 2: More than half of the days <br> 3: Nearly Everyday</h4>
    <div id="quiz" class="questions-container"></div>
    <div id="result" class="result"></div>
    <button id="submit" class="button">Submit</button>
    <button id="retry" class="button hide">Retry</button>
    <ul>
        <li><a href="index.html">1st Questionnaire</a></li>
        <li></li><a href="index3.html">3rd Questionnaire</a></li>
    </ul>
  </div>

  <script>
    const quizData = [
      {
        question: 'Feeling nervous, anxious or on edge',
        options: ['0', '1', '2', '3'],
      },
      {
        question: 'Not being able to stop or control worrying',
        options: ['0', '1', '2', '3'],
      },
      {
        question: 'Feeling down, depressed, or hopeless',
        options: ['0', '1', '2', '3'],
      },
      {
        question: 'Little interest or pleasure in doing things',
        options: ['0', '1', '2', '3'],
      },
    ];

    const quizContainer = document.getElementById('quiz');
    const resultContainer = document.getElementById('result');
    const submitButton = document.getElementById('submit');
    const retryButton = document.getElementById('retry');
    const title2 = document.getElementById('title2');
    const title3 = document.getElementById('title3')

    let selectedOptions = new Array(quizData.length).fill(null);
    let score = 0;
    let incorrectAnswers = [];

    function shuffleArray(array) {
    }

    function displayQuestions() {
      shuffleArray(quizData);

      quizData.forEach((questionData, index) => {
        const questionElement = document.createElement('div');
        questionElement.className = 'question';
        questionElement.innerHTML = questionData.question;

        const optionsElement = document.createElement('div');
        optionsElement.className = 'options';

        const shuffledOptions = [...questionData.options];
        shuffleArray(shuffledOptions);

        for (let i = 0; i < shuffledOptions.length; i++) {
          const option = document.createElement('label');
          option.className = 'option';

          const radio = document.createElement('input');
          radio.type = 'radio';
          radio.name = `quiz${index}`;
          radio.value = shuffledOptions[i];

          radio.addEventListener('change', () => {
            selectedOptions[index] = shuffledOptions[i];
          });

          const optionText = document.createTextNode(shuffledOptions[i]);

          option.appendChild(radio);
          option.appendChild(optionText);
          optionsElement.appendChild(option);
        }

        quizContainer.appendChild(questionElement);
        quizContainer.appendChild(optionsElement);
      });
    }

    function checkAnswers() {
    let sum = 0;

    if (selectedOptions.every((option) => option !== null)) {
      selectedOptions.forEach((answer) => {
        sum += parseInt(answer); // Convert answer to an integer and add to the sum
      });

      displayResult(sum);
    }
  }

  function displayResult(sum) {
    quizContainer.style.display = 'none';
    submitButton.style.display = 'none';
    title2.style.display = 'none';
    title3.style.display = 'none';
    retryButton.style.display = 'inline-block';

    if (sum < 6) {
      
      resultContainer.innerHTML = `<span style="color: black;">Total Score: ${sum}</span><br><br>Negative screening for substantial signs and symptoms of anxiety and depression. This is not a substitute for a consultation with a relevant health professional competent in making a diagnosis of anxiety or depression as this is a basic screening for the most common signs and symptoms of anxiety and depression. If you are concerned about your mental health or mood please consider discussing this with a relevant health professional such as your general medical practitioner/family physician competent in making a diagnosis of anxiety or depression. Early low intensity treatment is very effective for these two conditions and if you are also suffering from persistent pain the two can interact so managing both can lead to better treatment outcomes.<br><br>`;
    } else if (sum>5 && sum<9) {
      resultContainer.innerHTML = `<span style="color: #FFC107;">Total Score: ${sum}</span><br><br>Positive screening for anxiety and/or depression. This is not a substitute for a consultation with a relevant health professional competent in making a diagnosis of anxiety or depression as this is a basic screening for the most common signs and symptoms of anxiety and depression. If you were unaware of your mental health or mood being affected recently please consider now discussing this with a relevant health professional such as your general medical practitioner/family physician competent in making a diagnosis of anxiety or depression. Early low intensity treatment is very effective for these two conditions and if you are also suffering from persistent pain the two can interact so managing both can lead to better treatment outcomes.<br><br>`;
    } else {
        resultContainer.innerHTML = `<span style="color: red;">Total Score: ${sum}</span><br><br>Positive screening for anxiety and/or depression. This is not a substitute for a consultation with a relevant health professional competent in making a diagnosis of anxiety or depression as this is a basic screening for the most common signs and symptoms of anxiety and depression. If you were unaware of your mental health or mood being affected recently please consider now discussing this with a relevant health professional such as your general medical practitioner/family physician competent in making a diagnosis of anxiety or depression. Early low intensity treatment is very effective for these two conditions and if you are also suffering from persistent pain the two can interact so managing both can lead to better treatment outcomes.<br><br>`;
    }
  }

    function retryQuiz() {
      selectedOptions = new Array(quizData.length).fill(null);
      score = 0;
      incorrectAnswers = [];
      quizContainer.innerHTML = '';
      quizContainer.style.display = 'block';
      submitButton.style.display = 'inline-block';
      retryButton.style.display = 'none';
      resultContainer.innerHTML = '';
      displayQuestions();
    }

    submitButton.addEventListener('click', checkAnswers);
    retryButton.addEventListener('click', retryQuiz);

    displayQuestions();
  </script>
</body>
</html>
